<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>„É¶„Éº„Ç∂„ÉºÁÆ°ÁêÜ - Demo</title>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --bg-primary: #0f0f14;
        --bg-secondary: #16161e;
        --bg-tertiary: #1e1e2a;
        --bg-card: #1a1a24;
        --bg-card-hover: #22222e;
        --border-color: #2a2a3a;
        --border-active: #4a4a6a;
        --text-primary: #e8e8f0;
        --text-secondary: #a0a0b8;
        --text-muted: #6a6a80;
        --accent-primary: #6366f1;
        --accent-secondary: #818cf8;
        --accent-glow: rgba(99, 102, 241, 0.2);
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
        --radius-sm: 6px;
        --radius-md: 10px;
        --radius-lg: 16px;
        --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
        --shadow-md: 0 4px 20px rgba(0, 0, 0, 0.4);
        --shadow-glow: 0 0 30px var(--accent-glow);
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Noto Sans JP", sans-serif;
        background: var(--bg-primary);
        color: var(--text-primary);
        min-height: 100vh;
        line-height: 1.6;
      }

      /* ËÉåÊôØ„Éë„Çø„Éº„É≥ */
      body::before {
        content: "";
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: radial-gradient(
            ellipse at 20% 0%,
            rgba(99, 102, 241, 0.08) 0%,
            transparent 50%
          ),
          radial-gradient(
            ellipse at 80% 100%,
            rgba(129, 140, 248, 0.06) 0%,
            transparent 50%
          );
        pointer-events: none;
        z-index: -1;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 40px 24px;
      }

      /* „Éò„ÉÉ„ÉÄ„Éº */
      header {
        margin-bottom: 40px;
      }

      .header-content {
        display: flex;
        align-items: center;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 20px;
      }

      .logo {
        display: flex;
        align-items: center;
        gap: 12px;
      }

      .logo-icon {
        width: 48px;
        height: 48px;
        background: linear-gradient(
          135deg,
          var(--accent-primary),
          var(--accent-secondary)
        );
        border-radius: var(--radius-md);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        box-shadow: var(--shadow-glow);
      }

      .logo-text {
        font-size: 24px;
        font-weight: 600;
        letter-spacing: -0.5px;
      }

      .logo-subtitle {
        font-size: 12px;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 2px;
      }

      /* Áµ±Ë®à„Ç´„Éº„Éâ */
      .stats-row {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 16px;
        margin-bottom: 32px;
      }

      .stat-card {
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        padding: 20px 24px;
        display: flex;
        align-items: center;
        gap: 16px;
        transition: all 0.3s ease;
      }

      .stat-card:hover {
        border-color: var(--border-active);
        transform: translateY(-2px);
      }

      .stat-icon {
        width: 48px;
        height: 48px;
        border-radius: var(--radius-md);
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
      }

      .stat-icon.users {
        background: rgba(99, 102, 241, 0.15);
      }
      .stat-icon.active {
        background: rgba(16, 185, 129, 0.15);
      }
      .stat-icon.inactive {
        background: rgba(245, 158, 11, 0.15);
      }
      .stat-icon.suspended {
        background: rgba(239, 68, 68, 0.15);
      }

      .stat-info h3 {
        font-size: 28px;
        font-weight: 600;
        line-height: 1;
      }

      .stat-info p {
        font-size: 13px;
        color: var(--text-muted);
        margin-top: 4px;
      }

      /* „Éï„Ç£„É´„Çø„Éº„Çª„ÇØ„Ç∑„Éß„É≥ */
      .filters-section {
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        padding: 24px;
        margin-bottom: 24px;
      }

      .filters-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
      }

      .filters-header h2 {
        font-size: 16px;
        font-weight: 500;
        display: flex;
        align-items: center;
        gap: 8px;
      }

      .filters-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
        gap: 16px;
      }

      .filter-group {
        display: flex;
        flex-direction: column;
        gap: 6px;
      }

      .filter-group label {
        font-size: 12px;
        font-weight: 500;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .filter-group select,
      .filter-group input {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-sm);
        padding: 10px 14px;
        color: var(--text-primary);
        font-size: 14px;
        font-family: inherit;
        transition: all 0.2s ease;
      }

      .filter-group select:focus,
      .filter-group input:focus {
        outline: none;
        border-color: var(--accent-primary);
        box-shadow: 0 0 0 3px var(--accent-glow);
      }

      .filter-group select {
        cursor: pointer;
        appearance: none;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%236a6a80' stroke-width='2'%3E%3Cpath d='M6 9l6 6 6-6'/%3E%3C/svg%3E");
        background-repeat: no-repeat;
        background-position: right 12px center;
        padding-right: 40px;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 10px 20px;
        border-radius: var(--radius-sm);
        font-size: 14px;
        font-weight: 500;
        font-family: inherit;
        cursor: pointer;
        transition: all 0.2s ease;
        border: none;
      }

      .btn-primary {
        background: linear-gradient(
          135deg,
          var(--accent-primary),
          var(--accent-secondary)
        );
        color: white;
        box-shadow: 0 2px 10px var(--accent-glow);
      }

      .btn-primary:hover {
        transform: translateY(-1px);
        box-shadow: 0 4px 20px var(--accent-glow);
      }

      .btn-secondary {
        background: var(--bg-tertiary);
        border: 1px solid var(--border-color);
        color: var(--text-secondary);
      }

      .btn-secondary:hover {
        background: var(--bg-card-hover);
        border-color: var(--border-active);
      }

      /* „É¶„Éº„Ç∂„Éº„Ç∞„É™„ÉÉ„Éâ */
      .users-section {
        margin-bottom: 32px;
      }

      .section-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: 20px;
      }

      .section-header h2 {
        font-size: 18px;
        font-weight: 600;
      }

      .users-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
        gap: 20px;
      }

      .user-card {
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        padding: 24px;
        cursor: pointer;
        transition: all 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      .user-card::before {
        content: "";
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 3px;
        background: linear-gradient(
          90deg,
          var(--accent-primary),
          var(--accent-secondary)
        );
        opacity: 0;
        transition: opacity 0.3s ease;
      }

      .user-card:hover {
        border-color: var(--border-active);
        transform: translateY(-4px);
        box-shadow: var(--shadow-md);
      }

      .user-card:hover::before {
        opacity: 1;
      }

      .user-header {
        display: flex;
        align-items: flex-start;
        gap: 16px;
        margin-bottom: 16px;
      }

      .user-avatar {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--accent-primary),
          var(--accent-secondary)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 22px;
        font-weight: 600;
        color: white;
        flex-shrink: 0;
      }

      .user-info {
        flex: 1;
        min-width: 0;
      }

      .user-name {
        font-size: 17px;
        font-weight: 600;
        margin-bottom: 4px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .user-email {
        font-size: 13px;
        color: var(--text-secondary);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .user-status {
        display: inline-flex;
        align-items: center;
        gap: 6px;
        padding: 4px 10px;
        border-radius: 20px;
        font-size: 11px;
        font-weight: 500;
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .user-status.active {
        background: rgba(16, 185, 129, 0.15);
        color: var(--success);
      }

      .user-status.inactive {
        background: rgba(245, 158, 11, 0.15);
        color: var(--warning);
      }

      .user-status.suspended {
        background: rgba(239, 68, 68, 0.15);
        color: var(--danger);
      }

      .user-status-dot {
        width: 6px;
        height: 6px;
        border-radius: 50%;
        background: currentColor;
      }

      .user-details {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }

      .user-detail {
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .user-detail-label {
        font-size: 11px;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .user-detail-value {
        font-size: 13px;
        color: var(--text-secondary);
      }

      .user-id {
        font-family: "JetBrains Mono", monospace;
        font-size: 11px;
        color: var(--text-muted);
        margin-top: 12px;
        padding-top: 12px;
        border-top: 1px solid var(--border-color);
      }

      /* „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥ */
      .pagination {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 8px;
        padding: 24px 0;
      }

      .pagination-btn {
        width: 40px;
        height: 40px;
        border-radius: var(--radius-sm);
        background: var(--bg-card);
        border: 1px solid var(--border-color);
        color: var(--text-secondary);
        font-size: 14px;
        cursor: pointer;
        transition: all 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .pagination-btn:hover:not(:disabled) {
        background: var(--bg-card-hover);
        border-color: var(--border-active);
      }

      .pagination-btn:disabled {
        opacity: 0.4;
        cursor: not-allowed;
      }

      .pagination-btn.active {
        background: var(--accent-primary);
        border-color: var(--accent-primary);
        color: white;
      }

      .pagination-info {
        font-size: 13px;
        color: var(--text-muted);
        padding: 0 16px;
      }

      /* „É¢„Éº„ÉÄ„É´ */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.7);
        backdrop-filter: blur(4px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: all 0.3s ease;
        padding: 24px;
      }

      .modal-overlay.active {
        opacity: 1;
        visibility: visible;
      }

      .modal {
        background: var(--bg-secondary);
        border: 1px solid var(--border-color);
        border-radius: var(--radius-lg);
        width: 100%;
        max-width: 600px;
        max-height: 90vh;
        overflow-y: auto;
        transform: scale(0.95) translateY(20px);
        transition: transform 0.3s ease;
      }

      .modal-overlay.active .modal {
        transform: scale(1) translateY(0);
      }

      .modal-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 24px;
        border-bottom: 1px solid var(--border-color);
      }

      .modal-header h2 {
        font-size: 20px;
        font-weight: 600;
      }

      .modal-close {
        width: 36px;
        height: 36px;
        border-radius: var(--radius-sm);
        background: transparent;
        border: 1px solid var(--border-color);
        color: var(--text-secondary);
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
      }

      .modal-close:hover {
        background: var(--bg-tertiary);
        border-color: var(--border-active);
      }

      .modal-body {
        padding: 24px;
      }

      .detail-profile {
        display: flex;
        align-items: center;
        gap: 20px;
        margin-bottom: 24px;
        padding-bottom: 24px;
        border-bottom: 1px solid var(--border-color);
      }

      .detail-avatar {
        width: 80px;
        height: 80px;
        border-radius: 50%;
        background: linear-gradient(
          135deg,
          var(--accent-primary),
          var(--accent-secondary)
        );
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 32px;
        font-weight: 600;
        color: white;
        flex-shrink: 0;
      }

      .detail-info h3 {
        font-size: 24px;
        font-weight: 600;
        margin-bottom: 4px;
      }

      .detail-info p {
        color: var(--text-secondary);
      }

      .detail-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: 20px;
      }

      .detail-item {
        display: flex;
        flex-direction: column;
        gap: 4px;
      }

      .detail-item.full-width {
        grid-column: span 2;
      }

      .detail-label {
        font-size: 12px;
        color: var(--text-muted);
        text-transform: uppercase;
        letter-spacing: 0.5px;
      }

      .detail-value {
        font-size: 15px;
        color: var(--text-primary);
      }

      .detail-value.mono {
        font-family: "JetBrains Mono", monospace;
        font-size: 13px;
        color: var(--text-secondary);
      }

      /* „É≠„Éº„Éá„Ç£„É≥„Ç∞ */
      .loading {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 60px;
        gap: 16px;
      }

      .spinner {
        width: 40px;
        height: 40px;
        border: 3px solid var(--border-color);
        border-top-color: var(--accent-primary);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        to {
          transform: rotate(360deg);
        }
      }

      .loading-text {
        color: var(--text-muted);
        font-size: 14px;
      }

      /* „Ç®„É©„ÉºÁä∂ÊÖã */
      .error-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 60px;
        gap: 16px;
        text-align: center;
      }

      .error-icon {
        font-size: 48px;
        opacity: 0.5;
      }

      .error-message {
        color: var(--danger);
        font-size: 14px;
      }

      /* Á©∫Áä∂ÊÖã */
      .empty-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 80px;
        gap: 16px;
        text-align: center;
      }

      .empty-icon {
        font-size: 64px;
        opacity: 0.3;
      }

      .empty-title {
        font-size: 18px;
        font-weight: 500;
      }

      .empty-desc {
        color: var(--text-muted);
        font-size: 14px;
      }

      /* „É¨„Çπ„Éù„É≥„Ç∑„Éñ */
      @media (max-width: 768px) {
        .container {
          padding: 24px 16px;
        }

        .header-content {
          flex-direction: column;
          align-items: flex-start;
        }

        .filters-grid {
          grid-template-columns: 1fr;
        }

        .users-grid {
          grid-template-columns: 1fr;
        }

        .detail-profile {
          flex-direction: column;
          text-align: center;
        }

        .detail-grid {
          grid-template-columns: 1fr;
        }

        .detail-item.full-width {
          grid-column: span 1;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <!-- „Éò„ÉÉ„ÉÄ„Éº -->
      <header>
        <div class="header-content">
          <div class="logo">
            <div class="logo-icon">üë•</div>
            <div>
              <div class="logo-text">„É¶„Éº„Ç∂„ÉºÁÆ°ÁêÜ</div>
              <div class="logo-subtitle">User Management</div>
            </div>
          </div>
          <button class="btn btn-primary" onclick="fetchUsers()">
            üîÑ Êõ¥Êñ∞
          </button>
        </div>
      </header>

      <!-- Áµ±Ë®à„Ç´„Éº„Éâ -->
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-icon users">üë•</div>
          <div class="stat-info">
            <h3 id="stat-total">-</h3>
            <p>Á∑è„É¶„Éº„Ç∂„ÉºÊï∞</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon active">‚úì</div>
          <div class="stat-info">
            <h3 id="stat-active">-</h3>
            <p>„Ç¢„ÇØ„ÉÜ„Ç£„Éñ</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon inactive">‚è∏</div>
          <div class="stat-info">
            <h3 id="stat-inactive">-</h3>
            <p>Èùû„Ç¢„ÇØ„ÉÜ„Ç£„Éñ</p>
          </div>
        </div>
        <div class="stat-card">
          <div class="stat-icon suspended">‚ö†</div>
          <div class="stat-info">
            <h3 id="stat-suspended">-</h3>
            <p>ÂÅúÊ≠¢‰∏≠</p>
          </div>
        </div>
      </div>

      <!-- „Éï„Ç£„É´„Çø„Éº„Çª„ÇØ„Ç∑„Éß„É≥ -->
      <div class="filters-section">
        <div class="filters-header">
          <h2>üîç „Éï„Ç£„É´„Çø„Éº & „ÇΩ„Éº„Éà</h2>
          <button class="btn btn-secondary" onclick="resetFilters()">
            „É™„Çª„ÉÉ„Éà
          </button>
        </div>
        <div class="filters-grid">
          <div class="filter-group">
            <label>„Çπ„ÉÜ„Éº„Çø„Çπ</label>
            <select id="filter-status" onchange="fetchUsers()">
              <option value="">„Åô„Åπ„Å¶</option>
              <option value="active">„Ç¢„ÇØ„ÉÜ„Ç£„Éñ</option>
              <option value="inactive">Èùû„Ç¢„ÇØ„ÉÜ„Ç£„Éñ</option>
              <option value="suspended">ÂÅúÊ≠¢‰∏≠</option>
            </select>
          </div>
          <div class="filter-group">
            <label>„ÇΩ„Éº„ÉàÈ†Ü</label>
            <select id="filter-sort" onchange="fetchUsers()">
              <option value="">„Éá„Éï„Ç©„É´„Éà</option>
              <option value="createdAt">‰ΩúÊàêÊó•ÊôÇ</option>
              <option value="updatedAt">Êõ¥Êñ∞Êó•ÊôÇ</option>
              <option value="name">ÂêçÂâç</option>
            </select>
          </div>
          <div class="filter-group">
            <label>Ë°®Á§∫‰ª∂Êï∞</label>
            <select id="filter-limit" onchange="fetchUsers()">
              <option value="10">10‰ª∂</option>
              <option value="20" selected>20‰ª∂</option>
              <option value="50">50‰ª∂</option>
              <option value="100">100‰ª∂</option>
            </select>
          </div>
          <div class="filter-group">
            <label>„Éö„Éº„Ç∏</label>
            <input
              type="number"
              id="filter-page"
              value="1"
              min="1"
              onchange="fetchUsers()"
            />
          </div>
        </div>
      </div>

      <!-- „É¶„Éº„Ç∂„Éº„Çª„ÇØ„Ç∑„Éß„É≥ -->
      <div class="users-section">
        <div class="section-header">
          <h2>üë• „É¶„Éº„Ç∂„Éº‰∏ÄË¶ß</h2>
          <span
            id="users-count"
            style="color: var(--text-muted); font-size: 14px"
          ></span>
        </div>
        <div id="users-container">
          <div class="loading">
            <div class="spinner"></div>
            <div class="loading-text">„É¶„Éº„Ç∂„ÉºÊÉÖÂ†±„ÇíË™≠„ÅøËæº„Åø‰∏≠...</div>
          </div>
        </div>
      </div>

      <!-- „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥ -->
      <div
        id="pagination-container"
        class="pagination"
        style="display: none"
      ></div>
    </div>

    <!-- „É¶„Éº„Ç∂„ÉºË©≥Á¥∞„É¢„Éº„ÉÄ„É´ -->
    <div id="user-modal" class="modal-overlay" onclick="closeModal(event)">
      <div class="modal" onclick="event.stopPropagation()">
        <div class="modal-header">
          <h2>„É¶„Éº„Ç∂„ÉºË©≥Á¥∞</h2>
          <button class="modal-close" onclick="closeModal()">‚úï</button>
        </div>
        <div class="modal-body" id="modal-body">
          <!-- „Ç≥„É≥„ÉÜ„É≥„ÉÑ„ÅØJavaScript„ÅßÊåøÂÖ• -->
        </div>
      </div>
    </div>

    <script>
      const BASE_URL = "http://localhost:3001";
      let currentPagination = null;

      // „É¶„Éº„Ç∂„Éº‰∏ÄË¶ß„ÇíÂèñÂæó
      async function fetchUsers() {
        const container = document.getElementById("users-container");
        const paginationContainer = document.getElementById(
          "pagination-container"
        );

        // „É≠„Éº„Éá„Ç£„É≥„Ç∞Ë°®Á§∫
        container.innerHTML = `
        <div class="loading">
          <div class="spinner"></div>
          <div class="loading-text">„É¶„Éº„Ç∂„ÉºÊÉÖÂ†±„ÇíË™≠„ÅøËæº„Åø‰∏≠...</div>
        </div>
      `;
        paginationContainer.style.display = "none";

        // „Éï„Ç£„É´„Çø„Éº„Éë„É©„É°„Éº„Çø„ÇíÂèñÂæó
        const status = document.getElementById("filter-status").value;
        const sort = document.getElementById("filter-sort").value;
        const limit = document.getElementById("filter-limit").value;
        const page = document.getElementById("filter-page").value;

        // „ÇØ„Ç®„É™„Éë„É©„É°„Éº„Çø„ÇíÊßãÁØâ
        const params = new URLSearchParams();
        if (status) params.append("status", status);
        if (sort) params.append("sort", sort);
        if (limit) params.append("limit", limit);
        if (page) params.append("page", page);

        const url = `${BASE_URL}/users${
          params.toString() ? "?" + params.toString() : ""
        }`;

        try {
          const response = await fetch(url);

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }

          const data = await response.json();

          if (!data.users || data.users.length === 0) {
            container.innerHTML = `
            <div class="empty-state">
              <div class="empty-icon">üîç</div>
              <div class="empty-title">„É¶„Éº„Ç∂„Éº„ÅåË¶ã„Å§„Åã„Çä„Åæ„Åõ„Çì</div>
              <div class="empty-desc">Êù°‰ª∂„ÇíÂ§âÊõ¥„Åó„Å¶ÂÜçÂ∫¶„ÅäË©¶„Åó„Åè„Å†„Åï„ÅÑ</div>
            </div>
          `;
            return;
          }

          // „É¶„Éº„Ç∂„Éº„Ç´„Éº„Éâ„ÇíË°®Á§∫
          renderUsers(data.users);

          // „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥„ÇíË°®Á§∫
          if (data.pagination) {
            currentPagination = data.pagination;
            renderPagination(data.pagination);
          }

          // Áµ±Ë®à„ÇíÊõ¥Êñ∞
          updateStats(data.users);
        } catch (error) {
          console.error("Error fetching users:", error);
          container.innerHTML = `
          <div class="error-state">
            <div class="error-icon">‚ö†Ô∏è</div>
            <div class="error-message">„É¶„Éº„Ç∂„ÉºÊÉÖÂ†±„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü</div>
            <div class="error-message" style="font-size: 12px; color: var(--text-muted);">${error.message}</div>
            <button class="btn btn-primary" onclick="fetchUsers()" style="margin-top: 16px;">ÂÜçË©¶Ë°å</button>
          </div>
        `;
        }
      }

      // „É¶„Éº„Ç∂„Éº„Ç´„Éº„Éâ„ÇíÊèèÁîª
      function renderUsers(users) {
        const container = document.getElementById("users-container");
        document.getElementById(
          "users-count"
        ).textContent = `${users.length}‰ª∂Ë°®Á§∫`;

        container.innerHTML = `
        <div class="users-grid">
          ${users
            .map(
              (user) => `
            <div class="user-card" onclick="openUserDetail('${user.id}')">
              <div class="user-header">
                <div class="user-avatar">${getInitials(user.name)}</div>
                <div class="user-info">
                  <div class="user-name">${escapeHtml(user.name)}</div>
                  <div class="user-email">${escapeHtml(user.email)}</div>
                </div>
                <span class="user-status ${user.status || "active"}">
                  <span class="user-status-dot"></span>
                  ${getStatusLabel(user.status)}
                </span>
              </div>
              <div class="user-details">
                <div class="user-detail">
                  <span class="user-detail-label">Âπ¥ÈΩ¢</span>
                  <span class="user-detail-value">${
                    user.age !== undefined ? user.age + "Ê≠≥" : "-"
                  }</span>
                </div>
                <div class="user-detail">
                  <span class="user-detail-label">ÈõªË©±Áï™Âè∑</span>
                  <span class="user-detail-value">${
                    user.phoneNumber || "-"
                  }</span>
                </div>
                <div class="user-detail">
                  <span class="user-detail-label">‰ΩúÊàêÊó•</span>
                  <span class="user-detail-value">${formatDate(
                    user.createdAt
                  )}</span>
                </div>
                <div class="user-detail">
                  <span class="user-detail-label">Êõ¥Êñ∞Êó•</span>
                  <span class="user-detail-value">${formatDate(
                    user.updatedAt
                  )}</span>
                </div>
              </div>
              <div class="user-id">ID: ${user.id}</div>
            </div>
          `
            )
            .join("")}
        </div>
      `;
      }

      // „Éö„Éº„Ç∏„Éç„Éº„Ç∑„Éß„É≥„ÇíÊèèÁîª
      function renderPagination(pagination) {
        const container = document.getElementById("pagination-container");
        const { page, totalPages, total } = pagination;

        if (totalPages <= 1) {
          container.style.display = "none";
          return;
        }

        container.style.display = "flex";

        let buttons = "";

        // Ââç„Å∏„Éú„Çø„É≥
        buttons += `<button class="pagination-btn" onclick="goToPage(${
          page - 1
        })" ${page <= 1 ? "disabled" : ""}>‚Üê</button>`;

        // „Éö„Éº„Ç∏Áï™Âè∑„Éú„Çø„É≥
        const maxVisible = 5;
        let startPage = Math.max(1, page - Math.floor(maxVisible / 2));
        let endPage = Math.min(totalPages, startPage + maxVisible - 1);

        if (endPage - startPage < maxVisible - 1) {
          startPage = Math.max(1, endPage - maxVisible + 1);
        }

        if (startPage > 1) {
          buttons += `<button class="pagination-btn" onclick="goToPage(1)">1</button>`;
          if (startPage > 2) {
            buttons += `<span class="pagination-info">...</span>`;
          }
        }

        for (let i = startPage; i <= endPage; i++) {
          buttons += `<button class="pagination-btn ${
            i === page ? "active" : ""
          }" onclick="goToPage(${i})">${i}</button>`;
        }

        if (endPage < totalPages) {
          if (endPage < totalPages - 1) {
            buttons += `<span class="pagination-info">...</span>`;
          }
          buttons += `<button class="pagination-btn" onclick="goToPage(${totalPages})">${totalPages}</button>`;
        }

        // Ê¨°„Å∏„Éú„Çø„É≥
        buttons += `<button class="pagination-btn" onclick="goToPage(${
          page + 1
        })" ${page >= totalPages ? "disabled" : ""}>‚Üí</button>`;

        container.innerHTML =
          buttons + `<span class="pagination-info">${total}‰ª∂‰∏≠</span>`;
      }

      // „Éö„Éº„Ç∏ÈÅ∑Áßª
      function goToPage(page) {
        document.getElementById("filter-page").value = page;
        fetchUsers();
      }

      // „É¶„Éº„Ç∂„ÉºË©≥Á¥∞„ÇíÂèñÂæó„Åó„Å¶Ë°®Á§∫
      async function openUserDetail(userId) {
        const modal = document.getElementById("user-modal");
        const modalBody = document.getElementById("modal-body");

        modal.classList.add("active");
        modalBody.innerHTML = `
        <div class="loading">
          <div class="spinner"></div>
          <div class="loading-text">Ë©≥Á¥∞ÊÉÖÂ†±„ÇíË™≠„ÅøËæº„Åø‰∏≠...</div>
        </div>
      `;

        try {
          const response = await fetch(
            `${BASE_URL}/users/${userId}?includeDetails=true`
          );

          if (!response.ok) {
            throw new Error(`HTTP ${response.status}: ${response.statusText}`);
          }

          const user = await response.json();
          renderUserDetail(user);
        } catch (error) {
          console.error("Error fetching user detail:", error);
          modalBody.innerHTML = `
          <div class="error-state">
            <div class="error-icon">‚ö†Ô∏è</div>
            <div class="error-message">Ë©≥Á¥∞ÊÉÖÂ†±„ÅÆÂèñÂæó„Å´Â§±Êïó„Åó„Åæ„Åó„Åü</div>
            <div class="error-message" style="font-size: 12px; color: var(--text-muted);">${error.message}</div>
          </div>
        `;
        }
      }

      // „É¶„Éº„Ç∂„ÉºË©≥Á¥∞„ÇíÊèèÁîª
      function renderUserDetail(user) {
        const modalBody = document.getElementById("modal-body");

        const address = user.address
          ? `„Äí${user.address.postalCode || "-"} ${
              user.address.prefecture || ""
            }${user.address.city || ""}${user.address.street || ""}`
          : "-";

        modalBody.innerHTML = `
        <div class="detail-profile">
          <div class="detail-avatar">${getInitials(user.name)}</div>
          <div class="detail-info">
            <h3>${escapeHtml(user.name)}</h3>
            <p>${escapeHtml(user.email)}</p>
            <span class="user-status ${
              user.status || "active"
            }" style="margin-top: 8px;">
              <span class="user-status-dot"></span>
              ${getStatusLabel(user.status)}
            </span>
          </div>
        </div>
        <div class="detail-grid">
          <div class="detail-item full-width">
            <span class="detail-label">„É¶„Éº„Ç∂„ÉºID</span>
            <span class="detail-value mono">${user.id}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Âπ¥ÈΩ¢</span>
            <span class="detail-value">${
              user.age !== undefined ? user.age + "Ê≠≥" : "-"
            }</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">ÈõªË©±Áï™Âè∑</span>
            <span class="detail-value">${user.phoneNumber || "-"}</span>
          </div>
          <div class="detail-item full-width">
            <span class="detail-label">‰ΩèÊâÄ</span>
            <span class="detail-value">${escapeHtml(address)}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">‰ΩúÊàêÊó•ÊôÇ</span>
            <span class="detail-value">${formatDateTime(user.createdAt)}</span>
          </div>
          <div class="detail-item">
            <span class="detail-label">Êõ¥Êñ∞Êó•ÊôÇ</span>
            <span class="detail-value">${formatDateTime(user.updatedAt)}</span>
          </div>
        </div>
      `;
      }

      // „É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Çã
      function closeModal(event) {
        if (event && event.target !== event.currentTarget) return;
        document.getElementById("user-modal").classList.remove("active");
      }

      // „Éï„Ç£„É´„Çø„Éº„Çí„É™„Çª„ÉÉ„Éà
      function resetFilters() {
        document.getElementById("filter-status").value = "";
        document.getElementById("filter-sort").value = "";
        document.getElementById("filter-limit").value = "20";
        document.getElementById("filter-page").value = "1";
        fetchUsers();
      }

      // Áµ±Ë®à„ÇíÊõ¥Êñ∞
      function updateStats(users) {
        const total = users.length;
        const active = users.filter(
          (u) => u.status === "active" || !u.status
        ).length;
        const inactive = users.filter((u) => u.status === "inactive").length;
        const suspended = users.filter((u) => u.status === "suspended").length;

        document.getElementById("stat-total").textContent =
          currentPagination?.total || total;
        document.getElementById("stat-active").textContent = active;
        document.getElementById("stat-inactive").textContent = inactive;
        document.getElementById("stat-suspended").textContent = suspended;
      }

      // „É¶„Éº„ÉÜ„Ç£„É™„ÉÜ„Ç£Èñ¢Êï∞
      function getInitials(name) {
        if (!name) return "?";
        const parts = name.split(/[\s„ÄÄ]+/);
        if (parts.length >= 2) {
          return (parts[0][0] + parts[1][0]).toUpperCase();
        }
        return name.substring(0, 2).toUpperCase();
      }

      function getStatusLabel(status) {
        const labels = {
          active: "„Ç¢„ÇØ„ÉÜ„Ç£„Éñ",
          inactive: "Èùû„Ç¢„ÇØ„ÉÜ„Ç£„Éñ",
          suspended: "ÂÅúÊ≠¢‰∏≠",
        };
        return labels[status] || "„Ç¢„ÇØ„ÉÜ„Ç£„Éñ";
      }

      function formatDate(dateString) {
        if (!dateString) return "-";
        const date = new Date(dateString);
        return date.toLocaleDateString("ja-JP", {
          year: "numeric",
          month: "short",
          day: "numeric",
        });
      }

      function formatDateTime(dateString) {
        if (!dateString) return "-";
        const date = new Date(dateString);
        return date.toLocaleString("ja-JP", {
          year: "numeric",
          month: "short",
          day: "numeric",
          hour: "2-digit",
          minute: "2-digit",
        });
      }

      function escapeHtml(str) {
        if (!str) return "";
        const div = document.createElement("div");
        div.textContent = str;
        return div.innerHTML;
      }

      // ESC„Ç≠„Éº„Åß„É¢„Éº„ÉÄ„É´„ÇíÈñâ„Åò„Çã
      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape") {
          closeModal();
        }
      });

      // ÂàùÊúüË™≠„ÅøËæº„Åø
      document.addEventListener("DOMContentLoaded", fetchUsers);
    </script>
  </body>
</html>
